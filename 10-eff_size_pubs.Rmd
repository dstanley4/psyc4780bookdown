
# Effect sizes with confidence intervals from a published study

A key part of planning sample sizes for your current study is assessing effect sizes from past studies. Unfortunately, studies often don't report effect sizes (e.g., $d$-values) or if they do, they don't report the confidence interval for that effect. In this chapter we focus on obtaining effect sizes with confidence intervals. 


## Correlations

Correlations are frequently reported in the literature. Less common, however, is the reporting of confidence intervals for those correlations. A confidence interval for a reported correlations (e.g., $r$ = .40) can be obtained if you also have the sample size ($n$ = 200) with the command below:

```{r}
library(MBESS)
ci.cc(r = .40, n = 200)
```

From this output you see that $r$ = .30, 95%  CI [.28, .51].

## Repeated Measures $d$-values

For a repeated measures design, different $d$-values can be report. Some authors (e.g., Cumming, 2011) suggest that $d$-values for independent group designs should reported for repeated measures designs -- and provide convincing arguments for this approach. That said, in our reading of the literature most people report and use repeated measures $d$-values, and corresponding confidence intervals, for repeated measures designs. Specifically, the use the formula below for repeated measures d-values. In this formula the symbol, $\bar{x}_{diff}$, indicates the mean of the column of differences. Likewise, s_{diff}, is used to indicate the standard deviation of the column of differences.

$$
\begin{aligned}
d & = \frac{\bar{x}_{diff}}{s_{diff}}
\end{aligned}
$$

In the repeated-measures calculations below we use the formula above.


### Reported repeated $d$-value, no confidence interval

Consider a scenario where a study reports a repeated-measures $d$ = .50 and $n$ = 150. The 95% confidence interval for this $d$-value (i.e., standardized mean difference) can be obtain with the command below.

```{r}
library(MBESS)
ci.sm(sm = .50, N = 150) 
```

From this output you see that $d$ = 0.50, 95%  CI [0.33, 0.67].


### Using repeated measures mean difference 

In some scenarios, a study might not report the $d$-value but does report information about the change in sufficient detail that you can calculate a repeated-measures d-value. Consider a scenario of a weight loss program with 150 participants where weights are measured in pounds (i.e. lbs). The participants "weigh in" at time 1. They diet for three months. Then they "weight out" at time 2.  There are now two columns (time1, time2) with weight information. We can create a third column, called diff, by subtracting time 1 weight from time 2 weights. That is, diff = time 2 weight - time 1 weight. The new diff column indicates how the weights for each person have changed over the diet. The new diff column is used to calcualted the repeated-measures d-value. Specifically, mean of the diff column ($bar{x}_{diff}$) and the standard deviation of the diff column ($s_{diff}$) are used in the formula below:

$$
\begin{aligned}
d & = \frac{\bar{x}_{diff}}{s_{diff}}
\end{aligned}
$$

If the mean of the column of differences was $\bar{x}_{diff} = -3.00lbs$ and the standard deviation of the column of differences is $s_{diff} = 6.00lbs$. Then we can can calculate, see below, the a repeated measures $d = 0.50$ (we ignore the minus sign). 


$$
\begin{aligned}
d & = \frac{\bar{x}_{diff}}{s_{diff}}
&= \frac{-3.00}{6.00}
&= -.50 
\end{aligned}
$$

We can get a confidence interval around this value with the code below.

```{r}
library(MBESS)
ci.sm(sm = .5, N =150) 
```

Thus, in our repeated measures design participants lost weight, $d = 0.50$, 95% CI [0.33, 0.67].




### Using repeated measures cell information

$$
\begin{aligned}
\bar{x}_{diff} & = \bar{x}_1 - \bar{x}_2
\end{aligned}
$$

$$
\begin{aligned}
s_{diff} & = s_1^2 + s_2^2 - 2(s_1)(s_2)r_{12}
\end{aligned}
$$


```{r}
library(MBESS)
ci.sm(sm = .8, N =100) # dvalues]
```


### Using repeated measures $t$-value


$$
\begin{aligned}
df &= n - 1
&= 200 - 1
&= 199
\end{aligned}
$$

$$
\begin{aligned}
n  &= df + 1
&= 199 + 1
&= 200
\end{aligned}
$$

```{r}
# t-value for repeated measures if 
library(MBESS)
ci.sm(ncp = 8.23, N = 200)
```




## Independent Groups $d$-value: Pooled Variance

### Reported $d$-value no confidence interval

```{r}
library(MBESS)
ci.smd(sm = 1.67, n.1 = 50, n.2 = 50) 
```


### Using cell means

```{r}
library(MBESS)
smd(Mean.1 = 5,
    s.1 = 1.2, 
    n.1 = 50, 
    Mean.2 = 3, 
    s.2 = 1.2, 
    n.2 = 50) 

```

```{r}
library(MBESS)
ci.smd(sm = 1.67, n.1 = 50, n.2 = 50) 
```


#### Equal group sizes

t(98) = 8.30 and equal sized groups

$$
\begin{aligned}
df &= n_1 + n_2 - 2
&= 50 + 50 -2
&= 98
\end{aligned}
$$

$$
\begin{aligned}
n_{group} &= \frac{df + 2}{2}
&= \frac{98 + 2}{2}
&= \frac{100}{2}
&= 50
\end{aligned}
$$


```{r}
library(MBESS)
ci.smd(ncp = 8.3, n.1 = 50, n.2 = 50) 
```


#### Unequal group sizes


```{r}
library(MBESS)
ci.smd(ncp = 8.3, n.1 = 65, n.2 = 35) 
```



## Independent Groups $d$-value: Control Group Variance


### Reported $d$-value no confidence interval

```{r}
library(MBESS)
ci.smd.c(smd.c = 1.67, n.C = 60, n.E = 40) 
```


### Using cell means

```{r}
library(MBESS)
smd.c(Mean.T = 5,
    Mean.C = 3, 
    s.C = 1.4, 
    n.C = 50) 
```

```{r}
library(MBESS)
ci.smd.c(smd.c = 1.43, n.E = 50, n.C = 50) 
```


#### Equal group sizes

t(98) = 8.30 and equal sized groups


```{r}
library(MBESS)
ci.smd.c(ncp = 8.3, n.E = 50, n.C = 50) 
```


#### Unequal group sizes


```{r}
library(MBESS)
ci.smd.c(ncp = 8.3, n.E = 40, n.C = 60) 
```
